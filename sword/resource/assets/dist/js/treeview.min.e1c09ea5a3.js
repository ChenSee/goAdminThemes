!function(e,a,r,n){"use strict";var t,i,o="treeview",s={};s.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:n,backColor:n,borderColor:n,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:n,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:n,onNodeCollapsed:n,onNodeDisabled:n,onNodeEnabled:n,onNodeExpanded:n,onNodeSelected:n,onNodeUnchecked:n,onNodeUnselected:n,onSearchComplete:n,onSearchCleared:n},s.options={silent:!1,ignoreChildren:!1},s.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0},t=function(t,n){return this.$element=e(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(n),{options:this.options,init:e.proxy(this.init,this),remove:e.proxy(this.remove,this),getNode:e.proxy(this.getNode,this),getParent:e.proxy(this.getParent,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}},t.prototype.init=function(t){this.tree=[],this.nodes=[],t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},s.settings,t),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},t.prototype.remove=function(){this.destroy(),e.removeData(this,o),e("#"+this.styleId).remove()},t.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},t.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},t.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",e.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},t.prototype.setInitialStates=function(n,s){if(n.nodes){s+=1;var o=n,t=this;e.each(n.nodes,function(n,e){e.nodeId=t.nodes.length,e.parentId=o.nodeId,e.hasOwnProperty("selectable")||(e.selectable=!0),e.state=e.state||{},e.state.hasOwnProperty("checked")||(e.state.checked=!1),e.state.hasOwnProperty("disabled")||(e.state.disabled=!1),e.state.hasOwnProperty("expanded")||(!e.state.disabled&&s<t.options.levels&&e.nodes&&e.nodes.length>0?e.state.expanded=!0:e.state.expanded=!1),e.state.hasOwnProperty("selected")||(e.state.selected=!1),t.nodes.push(e),e.nodes&&t.setInitialStates(e,s)})}},t.prototype.clickHandler=function(i){this.options.enableLinks||i.preventDefault();var o,n=e(i.target),t=this.findNode(n);t&&!t.state.disabled&&(o=n.attr("class")?n.attr("class").split(" "):[],-1!==o.indexOf("expand-icon")?(this.toggleExpandedState(t,s.options),this.render()):-1!==o.indexOf("check-icon")?(this.toggleCheckedState(t,s.options),this.render()):(t.selectable?this.toggleSelectedState(t,s.options):this.toggleExpandedState(t,s.options),this.render()))},t.prototype.findNode=function(t){var n=t.closest("li.list-group-item").attr("data-nodeid"),e=this.nodes[n];return e||console.log("Error: node does not exist"),e},t.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},t.prototype.setExpandedState=function(t,s,n){s!==t.state.expanded&&(s&&t.nodes?(t.state.expanded=!0,n.silent||this.$element.trigger("nodeExpanded",e.extend(!0,{},t))):s||(t.state.expanded=!1,n.silent||this.$element.trigger("nodeCollapsed",e.extend(!0,{},t)),t.nodes&&!n.ignoreChildren&&e.each(t.nodes,e.proxy(function(t,e){this.setExpandedState(e,!1,n)},this))))},t.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},t.prototype.setSelectedState=function(t,s,n){s!==t.state.selected&&(s?(this.options.multiSelect||e.each(this.findNodes("true","g","state.selected"),e.proxy(function(t,e){this.setSelectedState(e,!1,n)},this)),t.state.selected=!0,n.silent||this.$element.trigger("nodeSelected",e.extend(!0,{},t))):(t.state.selected=!1,n.silent||this.$element.trigger("nodeUnselected",e.extend(!0,{},t))))},t.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},t.prototype.setCheckedState=function(t,n,s){n!==t.state.checked&&(n?(t.state.checked=!0,s.silent||this.$element.trigger("nodeChecked",e.extend(!0,{},t))):(t.state.checked=!1,s.silent||this.$element.trigger("nodeUnchecked",e.extend(!0,{},t))))},t.prototype.setDisabledState=function(t,s,n){s!==t.state.disabled&&(s?(t.state.disabled=!0,this.setExpandedState(t,!1,n),this.setSelectedState(t,!1,n),this.setCheckedState(t,!1,n),n.silent||this.$element.trigger("nodeDisabled",e.extend(!0,{},t))):(t.state.disabled=!1,n.silent||this.$element.trigger("nodeEnabled",e.extend(!0,{},t))))},t.prototype.render=function(){this.initialized||(this.$element.addClass(o),this.$wrapper=e(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},t.prototype.buildTree=function(s,n){if(s){n+=1;var t=this;e.each(s,function(r,s){for(var o,i=e(t.template.item).addClass("node-"+t.elementId).addClass(s.state.checked?"node-checked":"").addClass(s.state.disabled?"node-disabled":"").addClass(s.state.selected?"node-selected":"").addClass(s.searchResult?"search-result":"").attr("data-nodeid",s.nodeId).attr("style",t.buildStyleOverride(s)),a=0;n-1>a;a++)i.append(t.template.indent);return o=[],(s.nodes?(o.push("expand-icon"),o.push(s.state.expanded?t.options.collapseIcon:t.options.expandIcon)):o.push(t.options.emptyIcon),i.append(e(t.template.icon).addClass(o.join(" "))),t.options.showIcon)&&(o=["node-icon"],o.push(s.icon||t.options.nodeIcon),s.state.selected&&(o.pop(),o.push(s.selectedIcon||t.options.selectedIcon||s.icon||t.options.nodeIcon)),i.append(e(t.template.icon).addClass(o.join(" ")))),t.options.showCheckbox&&(o=["check-icon"],o.push(s.state.checked?t.options.checkedIcon:t.options.uncheckedIcon),i.append(e(t.template.icon).addClass(o.join(" ")))),i.append(t.options.enableLinks?e(t.template.link).attr("href",s.href).append(s.text):s.text),t.options.showTags&&s.tags&&e.each(s.tags,function(s,n){i.append(e(t.template.badge).append(n))}),t.$wrapper.append(i),s.nodes&&s.state.expanded&&!s.state.disabled?t.buildTree(s.nodes,n):void 0})}},t.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,n=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(n=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(n=this.options.searchResultBackColor)),"color:"+t+";background-color:"+n+";"},t.prototype.injectStyle=function(){this.options.injectStyle&&!r.getElementById(this.styleId)&&e('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},t.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},t.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},t.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",t.prototype.getNode=function(e){return this.nodes[e]},t.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},t.prototype.getSiblings=function(n){var e=this.identifyNode(n),t=this.getParent(e),s=t?t.nodes:this.tree;return s.filter(function(t){return t.nodeId!==e.nodeId})},t.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},t.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},t.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},t.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},t.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},t.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},t.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},t.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},t.prototype.selectNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},t.prototype.unselectNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},t.prototype.toggleNodeSelected=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},t.prototype.collapseAll=function(t){var n=this.findNodes("true","g","state.expanded");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},t.prototype.collapseNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},t.prototype.expandAll=function(t){if(t=e.extend({},s.options,t),t&&t.levels)this.expandLevels(this.tree,t.levels,t);else{var n=this.findNodes("false","g","state.expanded");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render()},t.prototype.expandNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(t,e){this.setExpandedState(t,!0,e),t.nodes&&e&&e.levels&&this.expandLevels(t.nodes,e.levels-1,e)},this)),this.render()},t.prototype.expandLevels=function(o,n,t){t=e.extend({},s.options,t),e.each(o,e.proxy(function(s,e){this.setExpandedState(e,n>0,t),e.nodes&&this.expandLevels(e.nodes,n-1,t)},this))},t.prototype.revealNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(t,n){for(var e=this.getParent(t);e;)this.setExpandedState(e,!0,n),e=this.getParent(e)},this)),this.render()},t.prototype.toggleNodeExpanded=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},t.prototype.checkAll=function(t){var n=this.findNodes("false","g","state.checked");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},t.prototype.checkNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},t.prototype.uncheckAll=function(t){var n=this.findNodes("true","g","state.checked");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},t.prototype.uncheckNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},t.prototype.toggleNodeChecked=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},t.prototype.disableAll=function(t){var n=this.findNodes("false","g","state.disabled");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},t.prototype.disableNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},t.prototype.enableAll=function(t){var n=this.findNodes("true","g","state.disabled");this.forEachIdentifier(n,t,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},t.prototype.enableNode=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},t.prototype.toggleNodeDisabled=function(t,n){this.forEachIdentifier(t,n,e.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},t.prototype.forEachIdentifier=function(t,n,o){n=e.extend({},s.options,n),t instanceof Array||(t=[t]),e.each(t,e.proxy(function(t,e){o(this.identifyNode(e),n)},this))},t.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},t.prototype.search=function(t,n){n=e.extend({},s.searchOptions,n),this.clearSearch({render:!1});var i,o=[];return t&&t.length>0&&(n.exactMatch&&(t="^"+t+"$"),i="g",n.ignoreCase&&(i+="i"),o=this.findNodes(t,i),e.each(o,function(t,e){e.searchResult=!0})),n.revealResults?this.revealNode(o):this.render(),this.$element.trigger("searchComplete",e.extend(!0,{},o)),o},t.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var n=e.each(this.findNodes("true","g","searchResult"),function(t,e){e.searchResult=!1});t.render&&this.render(),this.$element.trigger("searchCleared",e.extend(!0,{},n))},t.prototype.findNodes=function(s,t,n){t=t||"g",n=n||"text";var o=this;return e.grep(this.nodes,function(i){var e=o.getNodeValue(i,n);return"string"==typeof e?e.match(new RegExp(s,t)):void 0})},t.prototype.getNodeValue=function(s,e){if(t=e.indexOf("."),t>0){var t,o=s[e.substring(0,t)],i=e.substring(t+1,e.length);return this.getNodeValue(o,i)}return s.hasOwnProperty(e)?s[e].toString():n},i=function(e){a.console&&a.console.error(e)},e.fn[o]=function(n,s){var a;return this.each(function(){var r=e.data(this,o);"string"==typeof n?r?e.isFunction(r[n])&&"_"!==n.charAt(0)?(s instanceof Array||(s=[s]),a=r[n].apply(r,s)):i("No such method : "+n):i("Not initialized, can not call method : "+n):"boolean"==typeof n?a=r:e.data(this,o,new t(this,e.extend(!0,{},n)))}),a||this}}(jQuery,window,document)